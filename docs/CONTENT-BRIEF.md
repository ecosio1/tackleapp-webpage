# Content Brief - The Handoff Point

## Overview

The **Content Brief** is the structured handoff point between the ideation system and the generation system. It transforms raw blog opportunities into detailed content specifications that guide the LLM generator.

**Think of it as:** A recipe card for content creation.

---

## Why Content Briefs Matter

### 1. **Generator Stays Focused**
- Clear target keyword and secondary keywords
- Specific location or species focus
- Defined content angle (beginner, seasonal, gear-focused, etc.)
- Eliminates ambiguity and hallucination

### 2. **Content Stays Consistent**
- All posts follow the same brief structure
- Quality standards enforced via required sections
- Disclaimers and guardrails built-in
- Internal linking strategy included

### 3. **Easy to Debug or Re-run**
- Brief is saved with each generation
- Can regenerate content from the same brief
- Can modify brief and regenerate without touching ideation
- Clear audit trail of what was requested vs what was generated

---

## Content Brief Structure

```typescript
interface ContentBrief {
  // Page metadata
  pageType: 'blog' | 'species' | 'how-to' | 'location';
  slug: string;
  topicKey: string;
  title: string;

  // SEO & Keywords (from ideation system)
  primaryKeyword: string;           // e.g., "best lures for snook florida"
  secondaryKeywords: string[];      // e.g., ["snook lures", "florida snook fishing"]

  // Content Focus (defines scope)
  locationFocus?: string;           // e.g., "Florida", "Texas Gulf Coast"
  speciesFocus?: string;            // e.g., "Snook", "Redfish"

  // Content Strategy (defines approach)
  userIntent: 'informational' | 'navigational' | 'transactional';
  angle: 'beginner' | 'advanced' | 'seasonal' | 'gear-focused' | 'location-focused' | 'technique-focused';

  // Structure & Facts
  outline: OutlineItem[];           // Hierarchical content structure
  keyFacts: Fact[];                 // Research facts to include
  sources: Source[];                // Citations

  // Internal Linking
  internalLinksToInclude: {
    speciesSlugs?: string[];
    howToSlugs?: string[];
    locationSlugs?: string[];
    postSlugs?: string[];
  };

  // Requirements & Guardrails
  disclaimers: string[];            // Required disclaimers
  minWordCount: number;             // Minimum word count
  requiredSections: string[];       // Required H2 sections
}
```

---

## Content Brief Fields Explained

### 1. SEO & Keywords

**primaryKeyword**
- The main search query to target
- From ideation system's top opportunity
- Example: "best lures for snook florida"

**secondaryKeywords**
- Related keywords to include naturally
- From ideation system's related keywords
- Example: ["snook lures", "florida snook fishing", "soft plastic jerkbaits"]

### 2. Content Focus

**locationFocus** (optional)
- Geographic focus extracted from keywords
- Examples:
  - "Florida"
  - "Texas Gulf Coast"
  - "Tampa Bay"
  - "East Coast"
- Auto-detected from title/keywords
- Informs location-specific advice

**speciesFocus** (optional)
- Target fish species extracted from keywords
- Examples:
  - "Snook"
  - "Redfish"
  - "Tarpon"
  - "Bass"
- Auto-detected from title/keywords
- Informs species-specific techniques

### 3. Content Strategy

**userIntent**
- `informational`: User wants to learn (most blog posts)
- `navigational`: User looking for specific page/resource
- `transactional`: User ready to buy/download
- Blog posts should always be `informational`

**angle**
- `beginner`: For new anglers, basic concepts
- `advanced`: For experienced anglers, advanced tactics
- `seasonal`: Focuses on time-of-year patterns
- `gear-focused`: Reviews/recommendations of specific gear
- `location-focused`: Specific to geographic area
- `technique-focused`: How-to, methods, strategies

### 4. Structure & Facts

**outline**
- Hierarchical structure (H2 and H3 headings)
- Each item has title, description, and optional facts
- Generated based on page type and best practices

**keyFacts**
- Top 15 most relevant facts from research
- Sorted by confidence score
- Include claim, sources, category, scope

**sources**
- Credible sources to cite
- Include URL, label, publisher, retrieved date

### 5. Internal Linking

**internalLinksToInclude**
- Relevant internal pages to link to
- Organized by content type (species, how-to, location, blog)
- Generated by internal linking algorithm
- Strengthens site architecture and SEO

### 6. Requirements & Guardrails

**disclaimers**
- Required legal/safety disclaimers
- Example: Regulations disclaimer with link to FWC

**minWordCount**
- Minimum word count for this page type
- Blog: 1000 words
- Species: 1200 words
- How-to: 800 words
- Location: 1200 words

**requiredSections**
- H2 sections that must be included
- Varies by page type
- Blog: ["Introduction", "Main Content", "Conclusion"]
- Species: ["About", "Habitat", "Techniques", "Where to Find"]

---

## How Briefs Are Built

### Input (from Ideation System)

```typescript
{
  pageType: 'blog',
  title: 'Best Lures for Snook in Florida: Complete Guide',
  primaryKeyword: 'best lures for snook florida',
  secondaryKeywords: ['snook lures', 'florida snook fishing', 'soft plastic jerkbaits'],
  facts: [...], // Research facts
  sources: [...], // Sources
}
```

### Process (Brief Builder)

1. **Extract Content Focus**
   - Scan title/keywords for location mentions → "Florida"
   - Scan title/keywords for species mentions → "Snook"

2. **Determine Content Strategy**
   - Analyze keyword intent → "informational"
   - Analyze keyword angle → "gear-focused" (contains "lures")

3. **Build Outline**
   - Generate H2/H3 structure based on page type
   - Attach relevant facts to each section

4. **Select Internal Links**
   - Find related species pages (Snook)
   - Find related location pages (Florida)
   - Find related how-to guides

5. **Apply Guardrails**
   - Add required disclaimers
   - Set minimum word count
   - Define required sections

### Output (Content Brief)

```typescript
{
  pageType: 'blog',
  slug: 'best-lures-for-snook-florida',
  topicKey: 'blog::best-lures-for-snook-florida',
  title: 'Best Lures for Snook in Florida: Complete Guide',

  // SEO
  primaryKeyword: 'best lures for snook florida',
  secondaryKeywords: ['snook lures', 'florida snook fishing', 'soft plastic jerkbaits'],

  // Focus
  locationFocus: 'Florida',
  speciesFocus: 'Snook',

  // Strategy
  userIntent: 'informational',
  angle: 'gear-focused',

  // Structure
  outline: [
    { level: 2, title: 'Top 5 Snook Lures', description: '...' },
    { level: 2, title: 'Color Selection Guide', description: '...' },
    { level: 2, title: 'Seasonal Considerations', description: '...' },
    // ...
  ],
  keyFacts: [...],
  sources: [...],

  // Internal Links
  internalLinksToInclude: {
    speciesSlugs: ['snook'],
    locationSlugs: ['florida-fishing-guide'],
    howToSlugs: ['how-to-catch-snook'],
  },

  // Guardrails
  disclaimers: ['See local regulations disclaimer'],
  minWordCount: 1000,
  requiredSections: ['Introduction', 'Main Content', 'Conclusion'],
}
```

---

## Example Content Briefs

### Example 1: Gear-Focused Blog Post

```typescript
{
  pageType: 'blog',
  slug: 'best-lures-for-snook-florida',
  title: 'Best Lures for Snook in Florida: Complete Guide',
  primaryKeyword: 'best lures for snook florida',
  secondaryKeywords: ['snook lures', 'florida snook fishing'],
  locationFocus: 'Florida',
  speciesFocus: 'Snook',
  userIntent: 'informational',
  angle: 'gear-focused',
  outline: [
    { level: 2, title: 'Top 5 Snook Lures' },
    { level: 2, title: 'Color Selection Guide' },
    { level: 2, title: 'Where to Fish in Florida' },
  ],
  minWordCount: 1000,
}
```

**Generator Output**: Comprehensive gear review with specific product recommendations

---

### Example 2: Seasonal Technique Post

```typescript
{
  pageType: 'blog',
  slug: 'spring-redfish-patterns-texas',
  title: 'Spring Redfish Patterns on Texas Flats',
  primaryKeyword: 'spring redfish fishing texas',
  secondaryKeywords: ['texas redfish spring', 'wade fishing texas'],
  locationFocus: 'Texas',
  speciesFocus: 'Redfish',
  userIntent: 'informational',
  angle: 'seasonal',
  outline: [
    { level: 2, title: 'Spring Spawning Behavior' },
    { level: 2, title: 'Best Flats to Target' },
    { level: 2, title: 'Lure Selection for Spring' },
  ],
  minWordCount: 1000,
}
```

**Generator Output**: Seasonal guide focused on spring patterns and timing

---

### Example 3: Beginner How-To Guide

```typescript
{
  pageType: 'how-to',
  slug: 'how-to-fish-with-live-bait',
  title: 'How to Fish with Live Bait: Beginner Guide',
  primaryKeyword: 'how to fish with live bait',
  secondaryKeywords: ['live bait fishing', 'fishing with live bait for beginners'],
  locationFocus: undefined,
  speciesFocus: undefined,
  userIntent: 'informational',
  angle: 'beginner',
  outline: [
    { level: 2, title: 'Why Live Bait Works' },
    { level: 2, title: 'Step-by-Step Guide' },
    { level: 2, title: 'Common Beginner Mistakes' },
  ],
  minWordCount: 800,
}
```

**Generator Output**: Step-by-step beginner-friendly tutorial

---

### Example 4: Location-Focused Guide

```typescript
{
  pageType: 'location',
  slug: 'tampa-bay-fishing-guide',
  title: 'Tampa Bay Fishing Guide: Species, Spots & Techniques',
  primaryKeyword: 'tampa bay fishing guide',
  secondaryKeywords: ['fishing tampa bay', 'best fishing spots tampa bay'],
  locationFocus: 'Tampa Bay',
  speciesFocus: undefined,
  userIntent: 'informational',
  angle: 'location-focused',
  outline: [
    { level: 2, title: 'Best Fishing Spots in Tampa Bay' },
    { level: 2, title: 'Popular Species' },
    { level: 2, title: 'Seasonal Patterns' },
  ],
  minWordCount: 1200,
}
```

**Generator Output**: Comprehensive location guide with spots and species

---

## Workflow Integration

### Before Content Brief (Ideation → Generation)

```
❌ Problem: Loose handoff

Ideation System outputs:
  "best lures for snook florida" - 450 searches, 35 difficulty

Generation System receives:
  Just a keyword - no context, no strategy, no focus

Result: Inconsistent content, generator guesses at angle/focus
```

### After Content Brief (Ideation → Brief → Generation)

```
✅ Solution: Structured handoff

Ideation System outputs:
  BlogIdea { keyword, volume, difficulty, relatedKeywords }

Brief Builder transforms:
  BlogIdea → ContentBrief (with focus, angle, outline, guardrails)

Generation System receives:
  ContentBrief - complete specification with all context

Result: Consistent, focused, high-quality content
```

---

## Benefits of Content Briefs

### 1. Consistency
- Every post follows the same brief structure
- Same quality standards applied uniformly
- Predictable output format

### 2. Focus
- Generator knows exact target (keyword, location, species)
- Generator knows exact angle (beginner, gear-focused, etc.)
- No guessing or hallucination

### 3. Debuggability
- Brief is saved alongside generated content
- Can see exactly what was requested
- Can regenerate from same brief if needed
- Can modify brief and regenerate without touching ideation

### 4. Scalability
- Briefs can be generated in bulk
- Briefs can be queued and processed asynchronously
- Briefs can be reviewed/approved before generation
- Multiple generators can work from same brief format

### 5. Quality Control
- Required sections enforced
- Minimum word counts enforced
- Disclaimers automatically included
- Internal linking strategy built-in

---

## File Locations

```
scripts/pipeline/
├── types.ts              ← ContentBrief interface definition
├── briefBuilder.ts       ← Brief building logic
├── generators/
│   └── blog.ts          ← Consumes ContentBrief to generate posts
└── ideation.ts          ← Outputs BlogIdea (input to brief builder)
```

---

## Commands

### Generate Brief from Blog Idea

```bash
# This happens automatically in the pipeline
npm run pipeline publish --topicKey "blog::best-lures-for-snook-florida"

# Process:
# 1. Ideation discovers opportunity
# 2. Brief builder creates ContentBrief
# 3. Generator consumes ContentBrief
# 4. Validator checks output
# 5. Publisher writes files
```

### Test Brief Generation

```typescript
import { buildBrief } from './scripts/pipeline/briefBuilder';

const brief = await buildBrief({
  pageType: 'blog',
  topicKey: 'blog::test',
  slug: 'test-post',
  title: 'Best Lures for Snook in Florida',
  primaryKeyword: 'best lures for snook florida',
  secondaryKeywords: ['snook lures', 'florida snook'],
  facts: [],
  sources: [],
});

console.log(brief.locationFocus); // "Florida"
console.log(brief.speciesFocus);  // "Snook"
console.log(brief.angle);         // "gear-focused"
console.log(brief.userIntent);    // "informational"
```

---

## Summary

The **Content Brief** is the critical handoff point that transforms raw blog opportunities into structured content specifications. It ensures:

1. ✅ Generator has complete context (keywords, focus, angle, intent)
2. ✅ Content stays consistent across all posts
3. ✅ Quality standards are enforced automatically
4. ✅ Easy to debug, modify, and regenerate content
5. ✅ Clear audit trail from ideation → brief → generation

**Without briefs:** Ideation → Generator (loose coupling, inconsistent output)

**With briefs:** Ideation → Brief Builder → Generator (structured handoff, consistent output)

---

## Related Documentation

- **PIPELINE-ARCHITECTURE.md** - Full pipeline architecture
- **IDEATION-SYSTEM.md** - Ideation system boundaries
- **CONTENT-VALIDATION-RULES.md** - Validation rules
- **scripts/pipeline/types.ts** - ContentBrief interface
- **scripts/pipeline/briefBuilder.ts** - Brief building logic
